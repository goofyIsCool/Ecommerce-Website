{% extends "shop/base.html" %}
{% load crispy_forms_tags %}
{% load my_tags %}
{% block content %}
{% load static %}
<div class="mt-5 ml-5">
    <div class="ml-5">
        <div class="row ml-5">
            <div class="col-md-2 mx-5 box-element2">
                <div class="mx-3 mt-4">
                    <h3> Categories </h3>
                </div>
                <div class="col-lg-12 mx-auto my-3">
                    <div class="list-group">
                        {% for category in categories %}
                            <a href="?{% param_replace category=category.id %}" class="list-group-item list-group-item-action">{{ category.name }}</a>
                        {% endfor %}
                    </div>
                </div>
                <form method="get" class="mx-3">
                    {{ filter.form|crispy }}
                    <button type="submit">Search</button>
                </form>
            </div>
            <div class="col-md-8">
                <div class="row wow fadeIn mb-5">
                  {% for product in filter.qs %}
                    <div class="card m-3">
                        <div class="col">
                            <div class="view overlay mt-3">
                                <a href="{{ product.get_absolute_url }}"><img src="{{ product.image.url }}" class="card-img-top"></a>
                            </div>
                			<div class="box-element">
                                <a href="{{ product.get_absolute_url }}"><h5><strong>{{product.title}}</strong></h5></a>
                				<hr>
                				<button data-product="{{ product.id }}" data-action="add" class="btn btn-outline-secondary update-cart">Add to Cart</button>
                				<h5 style="display: inline-block; float:right;">{{product.price}} z≈Ç</h5>
                			</div>
                		</div>
                    </div>
                  {% endfor %}
                </div>
            </div>
        </div>
    </div>
</div>
<center>
    <div class="container">
        {% if is_paginated %}
                {% if page_obj.has_previous %}
                    <a class='btn btn-outline-info mb-4' href='?{% param_replace page=page_obj.previous_page_number %}'>Previous</a>
                {% endif %}

                {% for num in page_obj.paginator.page_range %}
                    {% if page_obj.number == num %}
                        <a class='btn btn-info mb-4' href="?{% param_replace page=num %}">{{ num }}</a>
                    {% elif num > page_obj.number|add:'-3' and num < page_obj.number|add:'3'  %}
                        <a class='btn btn-outline-info mb-4' href='?{% param_replace page=num %}'>{{ num }}</a>
                    {% endif %}
                {% endfor %}

                {% if page_obj.has_next %}
                    <a class='btn btn-outline-info mb-4' href='?{% param_replace page=page_obj.next_page_number %}'>Next</a>
                {% endif %}

        {% endif %}
    </div>
</center>

<div class="brands"><a href="#"> <img src="{% static 'shop/assets/img/instacart.png' %}"><img src="{% static 'shop/assets/img/kickstarter.png' %}"><img src="{% static 'shop/assets/img/lyft.png' %}"><img src="{% static 'shop/assets/img/shopify.png' %}"><img src="{% static 'shop/assets/img/pinterest.png' %}"><img src="{% static 'shop/assets/img/twitter.png' %}"></a></div>
<div>
    <div class="container">
        <div class="row">
            <div class="col-md-12"></div>
        </div>
        <div class="row">
            <div class="col-md-4"></div>
            <div class="col-md-4"></div>
            <div class="col-md-4"></div>
        </div>
    </div>
</div>
<div class="newsletter-subscribe">
    <div class="container">
        <div class="intro">
            <h2 class="text-center">Subscribe for our Newsletter</h2>
            <p class="text-center">Nunc luctus in metus eget fringilla. Aliquam sed justo ligula. Vestibulum nibh erat, pellentesque ut laoreet vitae. </p>
        </div>
        <form class="form-inline" method="post">
            <div class="form-group"><input class="form-control" type="email" name="email" placeholder="Your Email"></div>
            <div class="form-group"><button class="btn btn-primary" type="submit">Subscribe </button></div>
        </form>
    </div>
</div>
{% endblock %}
